<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<style>
		body {
			background-color: white;
			color: black;
			box-sizing: border-box;
		}

		.cpthis {
			width: 100%;

		}

		.cpthis:active {
			color: #ff98ef;
			background-color: #472bde;

		}

		.cpthis:hover {
			color: #2392b4;
		}

		.infop {
			background-color: #7cd8f4;
			font-style: italic;
			width: 100%;
		}
		
		
		.ezcpinfop {
			background-color: darkblue;
			font-style: italic;
			color: #80f2cf;	
		}
		
		
		textarea {
			width: 100%;
		}
		
		.hidden {
			display: none;
		}
		
		.buttonp {
			margin-top: 5px;
			margin-bottom: 1px;
		}
		
		.spcloutput {
			padding-top: 3px;
			padding-bottom: 3px;
			background-color: skyblue;
		}
		.spcloutput>button {
			font-style: italic;
		}
	
	</style>
	<script>



		function mkEzcpP(s) {
			if (s.length === 0)
				return;
			
			const p = document.createElement("p");
			const tnode = document.createTextNode(s);
			p.appendChild(tnode);
			p.classList.add("cpthis");	
			p.setAttribute("onclick","copyOnClick(this);");			
			
			const ezcpDiv = document.getElementById("ezcp");
			ezcpDiv.appendChild(p);
		}
		
		function parseStringInputAppendAllEzcpPs(toBeEzcpStr) {
			
			const separator = document.getElementById("separator");
			const toBeEzcpArr = toBeEzcpStr.split("\n");
			
			//clear Ezcp Div
			document.getElementById("ezcp").innerHTML = "";
			toBeEzcpArr.forEach(phrase => mkEzcpP(phrase));						
		}
		
		//--below called by ui stuff--
		
		//copy on click by ezcp	p: 	<div id="ezcp"> <p class="cpthis" onclick="copyOnClick(this)">help!</p>
		function copyOnClick(ele) {
			let copyText = ele.textContent;
			navigator.clipboard.writeText(copyText);
		}


		
		addEventListener("DOMContentLoaded", (event) => {
					
			document.getElementById("txtfileinput").addEventListener(
				"change",
				() => {

					const selectedFile = document.getElementById("txtfileinput").files[0];
					
					if (selectedFile) {
						
						// Read the file
						const reader = new FileReader();
						
						reader.onload = () => {
							
							parseStringInputAppendAllEzcpPs(reader.result);

						};
						reader.onerror = () => {
							alert("Error reading the file. Please try again.", "error");
						};
						reader.readAsText(selectedFile);
						

					}
					

				}, false,
			);

	
		    }); //		addEventListener("DOMContentLoaded", (event) => {


		//	<button onclick="txtInputReplaceEzcpBtnFn()" type="button">submit text file (.txt)</button>
		function txtInputBtnFn() {
			document.getElementById("txtfileinput").click();						
		}
		
		
		function showCpInputBtnFn() {
			document.getElementById("cpinput-div").classList.remove("hidden");			
		}
		
		function hideCpInputBtnFn() {
			document.getElementById("cpinput-div").classList.add("hidden");	
		}
		
		function clearCpInputBtnFn() {
			document.getElementById("cpinput-div").innerHTML = "";
		}

		function cpInputBtnFn() {
			const s = document.getElementById("tainput").value;
			parseStringInputAppendAllEzcpPs(s);
			hideCpInputBtnFn();
		}
		
		function outputAsHtmlEzcpPBtnFn() {
			let s = "";
			Array.from(document.getElementsByClassName("cpthis")).forEach(phrasep => s += '<p class="cpthis" onclick="copyOnClick(this)">' + phrasep.textContent + '</p>\n');
			
			document.getElementById("htmlout").value = s;
		} 

		
	</script>

</head>


<body>

	<p class="infop"> Select a separator for phrases:
		<select id="seperator">
			<option value="\n" selected="selected">new line (carriage return)</option>
			<option value="\">\</option>
			<option value="`">`</option>
			<option value="@">@</option>
		</select>
	</p>

	<p class="buttonp">

		<input type="file" id="txtfileinput" class="hidden" accept="txt" />
		<button class="" onclick="txtInputBtnFn()" type="button">submit text file (.txt)</button>

		<button class="" onclick="showCpInputBtnFn()" type="button">copy paste in</button>
		<button class="hidden" onclick="outputAsHtmlEzcpPBtnFn()" type="button">show output as html ezcp p</button>
		<button class="hidden" onclick="" type="button">show output as html reg p</button>

	</p>

	<div class="hidden" id="outputcode">
		<p class="infop" aria-live="polite">Click below to copy code</p>

		<textarea id="htmlout" rows="5" cols="33" onclick="copyOnClick(this)" readonly></textarea>
	</div>


	<div id="cpinput-div" class="hidden">
		<p class="infop cpinput" aria-live="polite">copy paste in below text box what you would like to make easy to copy. use your selected seperator to separate each phrase for one click copy.</p>

		<textarea id="tainput" class="cpinput" rows="5" cols="33"></textarea>

		<button onclick="cpInputBtnFn()" type="button">submit</button>
		<button onclick="clearCpInputBtnFn()" type="button">clear</button>
		<button onclick="hideCpInputBtnFn()" type="button">cancel</button>


	</div>


	<p class="ezcpinfop" aria-live="polite">>>Click a paragraph below to copy</p>


	<div id="ezcp">
		<p class="cpthis" onclick="copyOnClick(this)">help!</p>
		<p class="cpthis" onclick="copyOnClick(this)">sample text to copy</p>
	</div>

</body>

</html>
